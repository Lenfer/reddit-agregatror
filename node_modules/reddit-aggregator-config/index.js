'use strict';

const _ = require('lodash');
const path = require('path');

const configsPath = path.resolve(__dirname, '../../configs');
const enviroment = process.env.NODE_ENV || 'default';


// Пробуем загрузить конфиг
let config;

try {
	config = require(path.join(configsPath, enviroment));
} catch (e) {
	// Так как этот модуль используется в модуле логера то чтобы
	// избежать зацикливания в require воспользуемся родным
	console.log('reddit-aggregator-config:', e.message, e.stack);

	// Воспользуемся дефолтным
	config = require(path.join(configsPath, 'default'));
}


module.exports = config;

